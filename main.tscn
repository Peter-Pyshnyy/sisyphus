[gd_scene load_steps=40 format=3 uid="uid://b0milw6bon42a"]

[ext_resource type="PackedScene" uid="uid://de8jpoldt6s1n" path="res://assets/sprites/player.tscn" id="1_ig7tw"]
[ext_resource type="Script" uid="uid://dk6txbmoaxog" path="res://game_state.gd" id="1_kek77"]
[ext_resource type="Texture2D" uid="uid://dfexkg5huxho5" path="res://assets/parallax/parallax_0.png" id="2_0xm2m"]
[ext_resource type="Texture2D" uid="uid://ck55wnayf5oar" path="res://assets/parallax/parallax_1.png" id="3_h2yge"]
[ext_resource type="Shader" uid="uid://cf3eqce4gq3k3" path="res://pixelization.gdshader" id="4_1bvp3"]
[ext_resource type="Texture2D" uid="uid://do7c4mift3dv2" path="res://assets/parallax/parallax_2.png" id="5_lquwl"]
[ext_resource type="Texture2D" uid="uid://bjs43ymbemw1x" path="res://assets/parallax/parallax_3.png" id="6_7mycd"]
[ext_resource type="Texture2D" uid="uid://dvkiog5eujnrx" path="res://assets/parallax/parallax_-1.png" id="7_272bh"]
[ext_resource type="PackedScene" uid="uid://bb2xrsdxrrpqd" path="res://stone.tscn" id="8_5vw27"]
[ext_resource type="PackedScene" uid="uid://6j1pb7wp3oab" path="res://main_menu.tscn" id="9_kek77"]
[ext_resource type="FontFile" uid="uid://4mqn47yv5vvy" path="res://Pangolin-Regular.ttf" id="11_efxa6"]
[ext_resource type="FontFile" uid="uid://br5petpouymi7" path="res://GreatVibes-Regular.ttf" id="12_dg77c"]
[ext_resource type="AudioStream" uid="uid://bfrobif0ir5jp" path="res://assets/sounds/wind.wav" id="13_ycdy4"]

[sub_resource type="ShaderMaterial" id="ShaderMaterial_lquwl"]
shader = ExtResource("4_1bvp3")

[sub_resource type="QuadMesh" id="QuadMesh_7mycd"]
size = Vector2(1280, 720)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_272bh"]
size = Vector2(175.5, 20)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_5vw27"]
size = Vector2(370.214, 20)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_kek77"]
size = Vector2(35.0888, 301.121)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_4c57u"]
size = Vector2(40.4277, 475.032)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_efxa6"]
size = Vector2(82, 199)

[sub_resource type="RectangleShape2D" id="RectangleShape2D_dg77c"]
size = Vector2(131.25, 155)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_dg77c"]
bg_color = Color(0.952941, 0.933333, 0.909804, 0.803922)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_ycdy4"]
bg_color = Color(0.929412, 0.905882, 0.870588, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_w48qg"]
bg_color = Color(0.930524, 0.904246, 0.870169, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_efxa6"]
bg_color = Color(0.952941, 0.933333, 0.909804, 1)

[sub_resource type="Animation" id="Animation_dg77c"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Label:visible_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="Animation" id="Animation_w48qg"]
resource_name = "exit_text"
length = 2.5

[sub_resource type="Animation" id="Animation_ycdy4"]
resource_name = "new_animation"

[sub_resource type="Animation" id="Animation_efxa6"]
resource_name = "text_animation"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Label:visible_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 0.75),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 1.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_ycdy4"]
_data = {
&"RESET": SubResource("Animation_dg77c"),
&"exit_text": SubResource("Animation_w48qg"),
&"new_animation": SubResource("Animation_ycdy4"),
&"text_animation": SubResource("Animation_efxa6")
}

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_ycdy4"]

[sub_resource type="StyleBoxEmpty" id="StyleBoxEmpty_w48qg"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_vivmo"]
bg_color = Color(0, 0, 0, 0.00392157)

[sub_resource type="Animation" id="Animation_2cqfq"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ButtonExit:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [Color(1, 1, 1, 0)]
}

[sub_resource type="Animation" id="Animation_vivmo"]
resource_name = "exit_anim"
length = 2.5
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("ButtonExit:modulate")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(1.36667, 2.46667),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [Color(1, 1, 1, 0), Color(1, 1, 1, 1)]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_yaehf"]
_data = {
&"RESET": SubResource("Animation_2cqfq"),
&"exit_anim": SubResource("Animation_vivmo")
}

[sub_resource type="Animation" id="Animation_yaehf"]
resource_name = "controlls"
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("VBoxContainer2/Label2:visible_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0.433333, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 0,
"values": [0.0, 1.0]
}

[sub_resource type="Animation" id="Animation_074og"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("VBoxContainer2/Label2:visible_ratio")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_cegan"]
_data = {
&"RESET": SubResource("Animation_074og"),
&"controlls": SubResource("Animation_yaehf")
}

[node name="Main" type="Node2D"]
script = ExtResource("1_kek77")
metadata/_edit_vertical_guides_ = [2191.0, 2741.0, -705.0]

[node name="Player" parent="." instance=ExtResource("1_ig7tw")]
position = Vector2(2093, -700.375)

[node name="Camera2D" type="Camera2D" parent="Player"]
offset = Vector2(-36.305, -23.83)
enabled = false
zoom = Vector2(2.5, 2.5)
limit_left = -670
limit_right = 2175
limit_smoothed = true
position_smoothing_enabled = true

[node name="Camera2D2" type="Camera2D" parent="Player"]
offset = Vector2(-211.47, -23.83)
zoom = Vector2(2.5, 2.5)

[node name="skala" type="Node2D" parent="."]
position = Vector2(115, 138)

[node name="StaticBody2D" type="StaticBody2D" parent="skala"]

[node name="CollisionPolygon2D" type="CollisionPolygon2D" parent="skala/StaticBody2D"]
visible = false
polygon = PackedVector2Array(-118, 96, -17, 91, 66, 64, 84, 62, 119, 47, 141, 50, 199, 19, 234, 22, 271, 16, 318, -11, 393, -5, 458, -11, 539, -77, 631, -126, 653, -144, 718, -169, 797, -183, 870, -213, 917, -257, 938, -277, 975, -302, 1008, -325, 1046, -327, 1138, -349, 1183, -390, 1242, -442, 1284, -479, 1351, -507, 1417, -546, 1513, -562, 1619, -609, 1691, -675, 1753, -699, 1810, -721, 1904, -801, 1947, -830, 1990, -837, 2076, -838, 2077, 95)

[node name="ParallaxBackground" type="ParallaxBackground" parent="."]

[node name="ParallaxLayer" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2(0.5, 0.2)
motion_mirroring = Vector2(548.75, 0)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer"]
z_index = -1
scale = Vector2(0.25, 0.25)
texture = ExtResource("3_h2yge")
centered = false
region_enabled = true
region_rect = Rect2(-0.831, 0.385, 2195, 2000)

[node name="ParallaxLayer2" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2(0.3, 0.1)
motion_mirroring = Vector2(548.75, 0)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer2"]
z_index = -2
scale = Vector2(0.25, 0.25)
texture = ExtResource("5_lquwl")
centered = false
region_enabled = true
region_rect = Rect2(-0.831, 0.385, 2195, 941)

[node name="ParallaxLayer3" type="ParallaxLayer" parent="ParallaxBackground"]
motion_scale = Vector2(0.1, 0)
motion_mirroring = Vector2(548.75, 0)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer3"]
z_index = -3
scale = Vector2(0.25, 0.25)
texture = ExtResource("6_7mycd")
centered = false
region_enabled = true
region_rect = Rect2(-0.831, 0.385, 2195, 941)

[node name="ParallaxLayer4" type="ParallaxLayer" parent="ParallaxBackground"]

[node name="Sprite2D" type="Sprite2D" parent="ParallaxBackground/ParallaxLayer4"]
z_index = 4
position = Vector2(-710, -701)
texture = ExtResource("2_0xm2m")
centered = false
region_enabled = true
region_rect = Rect2(-0.831, 0.385, 2908, 2000)

[node name="ParallaxForeground" type="ParallaxBackground" parent="."]
layer = 1

[node name="ParallaxLayer5" type="ParallaxLayer" parent="ParallaxForeground"]
z_index = 5
motion_scale = Vector2(1.15, 1.05)

[node name="Sprite2D" type="Sprite2D" parent="ParallaxForeground/ParallaxLayer5"]
z_index = 159
position = Vector2(-836, -809)
scale = Vector2(1.09645, 1.00389)
texture = ExtResource("7_272bh")
centered = false
region_enabled = true
region_rect = Rect2(-0.831, 0.385, 2992, 2000)

[node name="MeshInstance2D" type="MeshInstance2D" parent="ParallaxForeground"]
z_index = 1500
material = SubResource("ShaderMaterial_lquwl")
position = Vector2(637.5, 356)
scale = Vector2(1.03672, 1.04167)
mesh = SubResource("QuadMesh_7mycd")

[node name="floors" type="Node2D" parent="."]

[node name="StaticBody2D" type="StaticBody2D" parent="floors"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="floors/StaticBody2D"]
position = Vector2(-62.25, 242)
shape = SubResource("RectangleShape2D_272bh")

[node name="StaticBody2D5" type="StaticBody2D" parent="floors"]
position = Vector2(-95, 7)

[node name="CollisionShape2D" type="CollisionShape2D" parent="floors/StaticBody2D5"]
position = Vector2(-140, 243)
rotation = -0.099014
shape = SubResource("RectangleShape2D_272bh")

[node name="StaticBody2D2" type="StaticBody2D" parent="floors"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="floors/StaticBody2D2"]
position = Vector2(-405.679, 234.028)
rotation = 0.0817902
shape = SubResource("RectangleShape2D_5vw27")

[node name="CollisionShape2D2" type="CollisionShape2D" parent="floors/StaticBody2D2"]
position = Vector2(-768, 226)
rotation = -0.0328626
shape = SubResource("RectangleShape2D_5vw27")

[node name="StaticBody2D3" type="StaticBody2D" parent="floors"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="floors/StaticBody2D3"]
position = Vector2(-694, 172.484)
rotation = -0.00425738
shape = SubResource("RectangleShape2D_kek77")

[node name="StaticBody2D4" type="StaticBody2D" parent="floors"]

[node name="CollisionShape2D" type="CollisionShape2D" parent="floors/StaticBody2D4"]
position = Vector2(2166, -876)
rotation = -0.00425738
shape = SubResource("RectangleShape2D_4c57u")

[node name="stone" parent="." instance=ExtResource("8_5vw27")]
z_index = -1
position = Vector2(242, 158)

[node name="peak_area" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 6

[node name="CollisionShape2D" type="CollisionShape2D" parent="peak_area"]
position = Vector2(2165, -747)
shape = SubResource("RectangleShape2D_efxa6")
disabled = true

[node name="PeakTimer" type="Timer" parent="peak_area"]
wait_time = 10.0
one_shot = true

[node name="left_area" type="Area2D" parent="."]
collision_layer = 0
collision_mask = 2

[node name="CollisionShape2D" type="CollisionShape2D" parent="left_area"]
position = Vector2(-557.625, 160)
shape = SubResource("RectangleShape2D_dg77c")

[node name="player_position" type="Node2D" parent="."]
position = Vector2(83, 219)

[node name="stone_position" type="Node2D" parent="."]
position = Vector2(242, 159)

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="MainMenu" parent="CanvasLayer" instance=ExtResource("9_kek77")]

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer"]
visible = false
anchors_preset = -1
anchor_left = 0.35
anchor_top = 0.26
anchor_right = 0.65
anchor_bottom = 0.579
offset_left = -3.05176e-05
offset_top = -0.200012
offset_right = -6.10352e-05
offset_bottom = 0.119965
grow_horizontal = 2
grow_vertical = 2

[node name="Button" type="Button" parent="CanvasLayer/VBoxContainer"]
layout_mode = 2
theme_override_colors/font_hover_color = Color(0.0588235, 0.0901961, 0.121569, 1)
theme_override_colors/font_color = Color(0.0588235, 0.0901961, 0.121569, 1)
theme_override_colors/font_focus_color = Color(0.0588235, 0.0901961, 0.121569, 1)
theme_override_colors/font_pressed_color = Color(0.0588235, 0.0901961, 0.121569, 1)
theme_override_fonts/font = ExtResource("11_efxa6")
theme_override_font_sizes/font_size = 41
theme_override_styles/focus = SubResource("StyleBoxFlat_dg77c")
theme_override_styles/hover = SubResource("StyleBoxFlat_ycdy4")
theme_override_styles/pressed = SubResource("StyleBoxFlat_w48qg")
theme_override_styles/normal = SubResource("StyleBoxFlat_efxa6")
text = "Продовжити"

[node name="HSeparator" type="HSeparator" parent="CanvasLayer/VBoxContainer"]
modulate = Color(1, 1, 1, 0)
custom_minimum_size = Vector2(0, 43.32)
layout_mode = 2

[node name="Button2" type="Button" parent="CanvasLayer/VBoxContainer"]
layout_mode = 2
theme_override_colors/font_hover_color = Color(0.0588235, 0.0901961, 0.121569, 1)
theme_override_colors/font_color = Color(0.0588235, 0.0901961, 0.121569, 1)
theme_override_colors/font_focus_color = Color(0.0588235, 0.0901961, 0.121569, 1)
theme_override_colors/font_pressed_color = Color(0.0588235, 0.0901961, 0.121569, 1)
theme_override_fonts/font = ExtResource("11_efxa6")
theme_override_font_sizes/font_size = 41
theme_override_styles/focus = SubResource("StyleBoxFlat_dg77c")
theme_override_styles/hover = SubResource("StyleBoxFlat_ycdy4")
theme_override_styles/pressed = SubResource("StyleBoxFlat_w48qg")
theme_override_styles/normal = SubResource("StyleBoxFlat_efxa6")
text = "Залишити гру"

[node name="Label" type="Label" parent="CanvasLayer"]
z_index = 2000
anchors_preset = -1
anchor_right = 0.379
anchor_bottom = 0.354
offset_right = 1118.88
offset_bottom = 0.119995
theme_override_colors/font_color = Color(0.133333, 0.184314, 0.239216, 0.733333)
theme_override_fonts/font = ExtResource("11_efxa6")
theme_override_font_sizes/font_size = 35
text = "Сізіфа так, що він щасливий, бо зумів залишити ілюзії 
про ціль і сенс, прийнявши абсурд 1як власну свободу."
max_lines_visible = 5
visible_characters = 0
visible_ratio = 0.0

[node name="TextAnim" type="AnimationPlayer" parent="CanvasLayer"]
libraries = {
&"": SubResource("AnimationLibrary_ycdy4")
}

[node name="TextAnimTimer" type="Timer" parent="CanvasLayer"]
wait_time = 5.0
one_shot = true

[node name="ButtonExit" type="Button" parent="CanvasLayer"]
visible = false
modulate = Color(1, 1, 1, 0)
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -100.0
offset_top = -111.0
offset_right = 100.0
offset_bottom = 2.0
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 6
theme_override_colors/font_disabled_color = Color(0.0784314, 0.0941176, 0.137255, 0.721569)
theme_override_colors/font_hover_color = Color(0.122644, 0.142069, 0.200454, 0.901961)
theme_override_colors/font_color = Color(0.0784314, 0.0941176, 0.137255, 0.721569)
theme_override_colors/font_focus_color = Color(0.0784314, 0.0941176, 0.137255, 0.721569)
theme_override_colors/font_pressed_color = Color(0.0784314, 0.0941176, 0.137255, 0.721569)
theme_override_fonts/font = ExtResource("12_dg77c")
theme_override_font_sizes/font_size = 90
theme_override_styles/focus = SubResource("StyleBoxEmpty_ycdy4")
theme_override_styles/disabled = SubResource("StyleBoxEmpty_w48qg")
theme_override_styles/hover = SubResource("StyleBoxFlat_vivmo")
theme_override_styles/pressed = SubResource("StyleBoxFlat_vivmo")
theme_override_styles/normal = SubResource("StyleBoxFlat_vivmo")
disabled = true
text = "Вихід
"

[node name="ExitAnim" type="AnimationPlayer" parent="CanvasLayer"]
libraries = {
&"": SubResource("AnimationLibrary_yaehf")
}

[node name="Control" type="AnimationPlayer" parent="CanvasLayer"]
libraries = {
&"": SubResource("AnimationLibrary_cegan")
}

[node name="VBoxContainer2" type="VBoxContainer" parent="CanvasLayer"]
visible = false
anchors_preset = 3
anchor_left = 1.0
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = -372.0
offset_top = -92.0
offset_right = -10.0
grow_horizontal = 0
grow_vertical = 0

[node name="Label2" type="Label" parent="CanvasLayer/VBoxContainer2"]
z_index = 2000
layout_mode = 2
theme_override_colors/font_color = Color(0.830335, 0.830335, 0.830335, 1)
theme_override_fonts/font = ExtResource("11_efxa6")
theme_override_font_sizes/font_size = 35
text = "space - залишити камінь"
max_lines_visible = 5
visible_characters = 0
visible_ratio = 0.0

[node name="Label3" type="Label" parent="CanvasLayer/VBoxContainer2"]
z_index = 2000
layout_mode = 2
theme_override_colors/font_color = Color(0.830335, 0.830335, 0.830335, 1)
theme_override_fonts/font = ExtResource("11_efxa6")
theme_override_font_sizes/font_size = 35
text = "esc - меню"
horizontal_alignment = 2
max_lines_visible = 5

[node name="CheatTimer" type="Timer" parent="."]
wait_time = 15.0
one_shot = true

[node name="StartTimer" type="Timer" parent="."]
wait_time = 3.0
one_shot = true

[node name="HeightTimer" type="Timer" parent="."]
wait_time = 6.0

[node name="AudioStreamPlayer2D" type="AudioStreamPlayer2D" parent="."]
stream = ExtResource("13_ycdy4")
volume_db = 15.848
autoplay = true

[connection signal="area_entered" from="peak_area" to="." method="_on_peak_area_area_entered"]
[connection signal="timeout" from="peak_area/PeakTimer" to="." method="_on_peak_timer_timeout"]
[connection signal="area_entered" from="left_area" to="." method="_on_left_area_area_entered"]
[connection signal="pressed" from="CanvasLayer/VBoxContainer/Button" to="Player" method="_on_button_pressed"]
[connection signal="pressed" from="CanvasLayer/VBoxContainer/Button2" to="." method="_on_button_2_pressed"]
[connection signal="timeout" from="CanvasLayer/TextAnimTimer" to="." method="_on_text_anim_timer_timeout"]
[connection signal="pressed" from="CanvasLayer/ButtonExit" to="." method="_on_button_exit_pressed"]
[connection signal="timeout" from="CheatTimer" to="." method="_on_cheat_timer_timeout"]
[connection signal="timeout" from="StartTimer" to="." method="_on_start_timer_timeout"]
[connection signal="timeout" from="HeightTimer" to="." method="_on_height_timer_timeout"]
